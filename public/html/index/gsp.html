<html lang="en">
<head>

<!-- Bootstrap core CSS -->
<link href="//yun.duiba.com.cn/flatlab/css/bootstrap.min.css" rel="stylesheet">
<link href="//yun.duiba.com.cn/flatlab/css/bootstrap-reset.css" rel="stylesheet">
<!--external css-->
<link rel="stylesheet" href="//yun.duiba.com.cn/flatlab/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
<link rel="stylesheet" href="//yun.duiba.com.cn/flatlab/assets/advanced-datatable/media/css/demo_table.css" rel="stylesheet" />
<link rel="stylesheet" href="//yun.duiba.com.cn/flatlab/assets/data-tables/DT_bootstrap.css" />
<link rel="stylesheet" href="//yun.duiba.com.cn/flatlab/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
<link rel="stylesheet" href="//yun.duiba.com.cn/flatlab/assets/bootstrap-datepicker/css/datepicker.css">

<link rel="stylesheet" type="text/css" href="//yun.duiba.com.cn/flatlab/assets/bootstrap-fileupload/bootstrap-fileupload.css" />
<!-- Custom styles for this template -->
<link href="//yun.duiba.com.cn/flatlab/css/style.css" rel="stylesheet">
<link href="//yun.duiba.com.cn/flatlab/css/style-responsive.css" rel="stylesheet" />

<link rel="stylesheet" type="text/css" href="//yun.duiba.com.cn/flatlab/assets/jquery-multi-select/css/multi-select.css" />

<!-- js placed at the end of the document so the pages load faster--> 
<script src="//yun.duiba.com.cn/js/jquery-1.10.2.min.js"></script>
<script src="//yun.duiba.com.cn/js/jquery.ui.widget.js"></script>
<script src="//yun.duiba.com.cn/js/jquery.iframe-transport.js"></script>
<script src="//yun.duiba.com.cn/assets/file-uploader/js/jquery.fileupload.js"></script>
<script src="//yun.duiba.com.cn/developer/assets/wysihtml5/advanced.js?t=20150603"></script>
<script src="//yun.duiba.com.cn/flatlab/js/bootstrap.min.js"></script>
<script class="include" type="text/javascript" src="//yun.duiba.com.cn/flatlab/js/jquery.dcjqaccordion.2.7.js"></script>
<script src="//yun.duiba.com.cn/flatlab/js/jquery.scrollTo.min.js"></script>
<script src="//yun.duiba.com.cn/flatlab/js/jquery.nicescroll.js" type="text/javascript"></script>
<script src="//yun.duiba.com.cn/flatlab/js/respond.min.js"></script>
<!--this page plugins--> 
<!--custom switch-->
<script src="//yun.duiba.com.cn/flatlab/js/bootstrap-switch.js"></script>
<!--custom tagsinput-->
<script src="//yun.duiba.com.cn/flatlab/js/jquery.tagsinput.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/fuelux/js/spinner.min.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/data-tables/jquery.dataTables.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/flatlab/assets/data-tables/DT_bootstrap.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/developer/assets/webuploader/webuploader.min.js"></script>
<script type="text/javascript" src="//yun.duiba.com.cn/developer/assets/avalon/avalon.modern.min.js"></script>

<!--common script for all pages-->
<script src="//yun.duiba.com.cn/flatlab/js/common-scripts.js"></script>
<script src="//yun.duiba.com.cn/flatlab/js/advanced-form-components.js"></script>

<script src="//yun.duiba.com.cn/flatlab/js/editable-table.js"></script>

    </head>
    <body>
        <table>
            <thead>
               <tr>
                   <td>id</td>
                   <td>email</td>
                   <td>phone</td>
                   <td>opration</td>
               </tr>
            </thead>
            <tbody>
                <tr>
                   <td>007</td>
                   <td>007@007.com</td>
                   <td>007007</td>
                   <td><a href="#" data-id="${it.id}" data-email="${it.email}" data-phone="${it.phone}" class="changeContact">编辑</td>
                </tr>
            </tbody>
        </table>
        <div class="modal fade" id="changeContactModal" ms-controller="model">
		<div class="modal-dialog">
	    	<div class="modal-content">
	      		<div class="modal-header">
	        		<h4 class="modal-title">修改信息</h4>
	      		</div>
		      	<div class="modal-body">
		      		<div class="form-horizontal">	
					<div class="form-group" style="display:none">
						<label for="email" class="col-sm-2 control-label">id</label>
						<div class="col-sm-8">
							<input class="form-control"  disabled  id="item-id" >								
						</div>
					</div>
                    <div class="form-group">
						<label for="email" class="col-sm-2 control-label">注册邮箱</label>
						<div class="col-sm-8">
							<input class="form-control" id="old-email" disabled >								
						</div>
					</div>
					<div class="form-group">
						<label for="phone" class="col-sm-2 control-label">手机号码</label>
						<div class="col-sm-8">
							<input class="form-control"  disabled  id="old-phone" name="phone" >
						</div>
					</div>
					<div class="form-group">
						<label for="new-email" class="col-sm-2 control-label">修改邮箱</label>
						<div class="col-sm-8">
						  <input class="form-control"  type="email" placeholder="请输入新邮箱" name="new-email" id="new-email" maxlength="20">
						</div>
					</div>
					<div class="form-group">
						<label for="new-phone" class="col-sm-2 control-label">修改手机</label>
						<div class="col-sm-8">
							<input class="form-control" type="number" id="new-phone" name="new-phone"  required  placeholder="请输入新手机号">
						</div>
					</div>
					</div>
		      	</div>
	      		<div class="modal-footer">
		        	<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
		        	<button type="button" class="btn btn-primary" ms-click="submit" id="submit-newinfo">确认</button>
		        </div>	
	      	</div>
	    </div>
	 </div>
        <script>
           $('.changeContact').on('click',function(){
             var oldPhone= $(this).attr('data-phone');
             var oldEmail= $(this).attr('data-email'); 
             var id = $(this).attr('data-id'); 
             
             $('#item-id').val(id);
             $('#old-phone').val(oldPhone);
             $('#old-email').val(oldEmail);
             $('#changeContactModal').modal('show');//关闭弹层
           });
           $('#submit-newinfo').on('click', function() {
              var newPhone = $('#new-phone').val();
              var newEmail = $('#new-email').val();
              var id = $('#item-id').val();
              var regPhone = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;
              var regEmail = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
              if(newPhone == 'undefine' || !regEmail.test(newEmail)) {
                alert('请输入正确邮箱地址!');
                return false;
              }
              if(newPhone == 'undefine' || !regPhone.test(newPhone)) {
                alert('请输入正确手机号!');
                return false;
              }
              console.log(id, newPhone, newEmail);
           })
        </script>
    </body>
</html>